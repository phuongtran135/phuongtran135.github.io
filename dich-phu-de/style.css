/* Giao diện được làm mới với theme màu Slate */
body {
  font-family: "Inter", sans-serif;
  background-color: #0f172a; /* slate-900 */
}

.custom-file-upload {
  border: 2px dashed #475569; /* slate-600 */
  background-color: #1e293b; /* slate-800 */
  transition: all 0.3s ease;
}
.custom-file-upload:hover,
.custom-file-upload.dragover {
  border-color: #6366f1; /* indigo-500 */
  background-color: #334155; /* slate-700 */
}

/* Thẻ nhân vật & Thẻ địa danh */
#characterMapContainer .character-profile-card,
#modal-content .character-profile-card,
#placeNameMapContainer .place-name-card { /* Added place-name-card */
  background-color: #1e293b; /* slate-800 */
  border-radius: 0.5rem;
  padding: 1rem;
  margin-bottom: 1rem;
  border: 1px solid #334155; /* slate-700 */
  position: relative; /* Cho nút xóa */
}
#loader {
  border: 5px solid #334155; /* slate-700 */
  border-top: 5px solid #6366f1; /* indigo-500 */
  border-radius: 50%;
  width: 50px;
  height: 50px;
  animation: spin 1s linear infinite;
}
#progress-bar-container {
  width: 100%;
  background-color: #334155; /* slate-700 */
  border-radius: 0.5rem;
  overflow: hidden;
  margin-top: 1rem;
}
#progress-bar {
  height: 10px;
  width: 0%;
  background-color: #6366f1; /* indigo-500 */
  transition: width 0.3s ease-in-out;
}

/* Kiểu cho nút xóa */
.delete-char-btn {
  position: absolute;
  top: 0.5rem;
  right: 0.5rem;
  background: none;
  border: none;
  color: #94a3b8; /* slate-400 */
  font-size: 1.1rem;
  cursor: pointer;
  transition: color 0.2s ease;
  padding: 0.25rem;
  line-height: 1;
}
.delete-char-btn:hover {
  color: #ef4444; /* red-500 */
}

/* Input có thể chỉnh sửa */
.editable-field {
  background-color: #334155; /* slate-700 */
  border: 1px solid #475569; /* slate-600 */
  border-radius: 0.375rem; /* rounded-md */
  padding: 0.25rem 0.5rem;
  color: #f1f5f9; /* slate-100 */
  width: 100%;
  font-size: 0.875rem; /* text-sm */
}
.editable-field:focus {
  outline: 2px solid #6366f1; /* focus:ring-indigo-500 */
  outline-offset: 2px;
  background-color: #475569; /* slate-600 */
}

/* Tùy chỉnh thanh cuộn */
.sub-container,
#characterMapContainer,
#placeNameMapContainer, /* Added placeNameMapContainer */
#modal-content,
.custom-scrollbar {
  scrollbar-width: thin;
  scrollbar-color: #475569 #1e293b; /* slate-600 slate-800 */
}
.sub-container::-webkit-scrollbar,
#characterMapContainer::-webkit-scrollbar,
#placeNameMapContainer::-webkit-scrollbar, /* Added placeNameMapContainer */
#modal-content::-webkit-scrollbar,
.custom-scrollbar::-webkit-scrollbar {
  width: 8px;
}
.sub-container::-webkit-scrollbar-track,
#characterMapContainer::-webkit-scrollbar-track,
#placeNameMapContainer::-webkit-scrollbar-track, /* Added placeNameMapContainer */
#modal-content::-webkit-scrollbar-track,
.custom-scrollbar::-webkit-scrollbar-track {
  background: #1e293b; /* slate-800 */
  border-radius: 10px;
}
.sub-container::-webkit-scrollbar-thumb,
#characterMapContainer::-webkit-scrollbar-thumb,
#placeNameMapContainer::-webkit-scrollbar-thumb, /* Added placeNameMapContainer */
#modal-content::-webkit-scrollbar-thumb,
.custom-scrollbar::-webkit-scrollbar-thumb {
  background: #475569; /* slate-600 */
  border-radius: 10px;
}
.sub-container::-webkit-scrollbar-thumb:hover,
#characterMapContainer::-webkit-scrollbar-thumb:hover,
#placeNameMapContainer::-webkit-scrollbar-thumb:hover, /* Added placeNameMapContainer */
#modal-content::-webkit-scrollbar-thumb:hover,
.custom-scrollbar::-webkit-scrollbar-thumb:hover {
  background: #64748b; /* slate-500 */
}

/* Khối phụ đề */
.sub-container {
  height: 70vh;
  max-height: 75vh;
  overflow-y: auto;
  padding: 1rem;
  background-color: #0f172a; /* slate-900 */
  border-radius: 0.75rem; /* rounded-xl */
  transition: height 0.3s ease-in-out;
}
.sub-container.expanded {
  height: 85vh; /* Expanded height */
}
.sub-block {
  background-color: #1e293b; /* slate-800 */
  border-radius: 0.5rem;
  padding: 0.75rem;
  margin-bottom: 1rem;
  border-left: 3px solid #334155; /* slate-700 */
  transition: background-color 0.2s ease, border-left-color 0.2s ease;
  position: relative; /* Needed for the retry button */
}
.sub-block.highlighted {
  background-color: #4338ca; /* indigo-700 */
  border-left-color: #a5b4fc; /* indigo-300 */
}
.sub-block.warning-highlight,
.sub-block.error-translate { /* Style for error blocks */
  border-left-color: #f59e0b; /* amber-500 */
  background-color: #3f2d15;
}
.sub-index {
  font-size: 0.75rem;
  color: #94a3b8; /* slate-400 */
  margin-bottom: 0.25rem;
}
.sub-time {
  font-size: 0.8rem;
  color: #cbd5e1; /* slate-300 */
  margin-bottom: 0.5rem;
  font-family: monospace;
}
.sub-text {
  color: #f1f5f9; /* slate-100 */
  line-height: 1.6;
  outline: none;
  padding-right: 2.5rem; /* Add padding to avoid overlapping with retry button */
}
.sub-block.error-translate .sub-text { /* Make error text more visible */
    color: #fcd34d; /* amber-300 */
    font-style: italic;
}
/* NEW: Retry Translate Button Style */
.retry-translate-btn {
    position: absolute;
    bottom: 0.5rem;
    right: 0.5rem;
    background-color: #475569; /* slate-600 */
    color: #cbd5e1; /* slate-300 */
    border: none;
    border-radius: 50%;
    width: 1.75rem;
    height: 1.75rem;
    font-size: 0.8rem;
    cursor: pointer;
    transition: background-color 0.2s ease, color 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
}
.retry-translate-btn:hover {
    background-color: #6366f1; /* indigo-500 */
    color: white;
}
.retry-translate-btn.loading {
    cursor: not-allowed;
    background-color: #334155; /* slate-700 */
}
 .retry-translate-btn .fa-spin {
    font-size: 0.9rem;
}


/* Prose styles for results */
.prose {
  color: #cbd5e1; /* slate-300 */
  line-height: 1.6;
}
.prose h4 {
  color: #ffffff;
  font-weight: 600;
  margin-bottom: 0.5rem;
}
.prose-sm {
  font-size: 0.875rem; /* text-sm */
}
.prose-invert {
  --tw-prose-body: #cbd5e1;
  --tw-prose-headings: #fff;
}

/* Input chung */
.form-input {
  background-color: #1e293b; /* slate-800 */
  border: 1px solid #334155; /* slate-700 */
  color: #f1f5f9; /* slate-100 */
}
.form-input::placeholder {
  color: #64748b; /* slate-500 */
}
.form-input:focus {
  border-color: #6366f1; /* indigo-500 */
  ring: 1px;
  box-shadow: 0 0 0 1px #6366f1;
  outline: none;
}

/* Suggested titles list */
#suggested-titles-list li {
  padding: 0.5rem 0;
  border-bottom: 1px solid #334155; /* slate-700 */
  display: flex; /* Cho nút copy */
  justify-content: space-between; /* Đẩy nút copy sang phải */
  align-items: center; /* Căn giữa nút copy */
}
 #suggested-titles-list li:last-child {
  border-bottom: none;
}
/* Nút copy tên truyện */
.copy-title-btn {
  background: none;
  border: none;
  color: #94a3b8; /* slate-400 */
  cursor: pointer;
  margin-left: 0.75rem; /* Khoảng cách với text */
  transition: color 0.2s ease;
  padding: 0.25rem;
}
.copy-title-btn:hover {
  color: #6366f1; /* indigo-500 */
}
 .copy-title-btn .fa-check { /* Kiểu khi đã copy */
  color: #10b981; /* green-500 */
}


@keyframes spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}